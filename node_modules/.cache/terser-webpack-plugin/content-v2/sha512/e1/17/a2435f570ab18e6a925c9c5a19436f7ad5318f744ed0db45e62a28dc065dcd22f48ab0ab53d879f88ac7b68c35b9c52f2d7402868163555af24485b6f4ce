{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{475:function(t,s,a){\"use strict\";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"搞懂虚拟机的日志和日志参数\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#搞懂虚拟机的日志和日志参数\"}},[t._v(\"#\")]),t._v(\" 搞懂虚拟机的日志和日志参数\")]),t._v(\" \"),a(\"img\",{attrs:{src:\"https://cdn.jsdelivr.net/gh/AJiSun/CDN/jvm-img/jvm-7-gclog.png\"}}),t._v(\" \"),a(\"p\",[t._v(\"Java特色就是自动垃圾回收，但是有时候垃圾回收并不是很理想，影响到我们自身服务对外提供支持了，此时，就需要根据GC的日志区看下回收的情况，以便调整出更好的效率。\")]),t._v(\" \"),a(\"p\",[t._v(\"这篇文章就来学习下怎么设置GC日志相关的一些参数以及怎么打印出来的日志分别是什么意思。\")]),t._v(\" \"),a(\"p\",[t._v(\"不同的垃圾收集器 会有不同的日志输出格式，我本地的环境是jdk1.8的，所以使用的垃圾收集器是默认的\"),a(\"strong\",[t._v(\"Parallel Scavenge+ Parallel old\")]),t._v(\" 本文就以这个收集器来测试的。\")]),t._v(\" \"),a(\"p\",[t._v(\"用参数 \"),a(\"code\",[t._v(\"-Xms50m -Xmx50m -Xmn20m\")]),t._v(\" 来控制这块代码的的堆内存大小。\")]),t._v(\" \"),a(\"p\",[t._v(\"-Xms50m ： 堆内存最小50M\")]),t._v(\" \"),a(\"p\",[t._v(\"-Xmx50m ： 堆内存最大50M\")]),t._v(\" \"),a(\"p\",[t._v(\"-Xmn20m ： 新生代20M，老年代就剩余30M\")]),t._v(\" \"),a(\"p\",[t._v(\"含义是 Java堆最大最小都是50MB 且不可变化，由于新生代可以分为Eden区和两个Survivor区(from区和to区)，且比例是8:1:1，\"),a(\"strong\",[t._v(\"所以Eden区大概16M，from区和to区各2M\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"PS\")]),t._v(\"YoungGen：表示垃圾收集器是Parallel Scavenge，回收的是新生代\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"Par\")]),t._v(\"OldGen：表示垃圾收集器是Parallel old，回收的是老年代\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_1-最简单参数-xx-printgc\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-最简单参数-xx-printgc\"}},[t._v(\"#\")]),t._v(\" 1. 最简单参数-XX:+PrintGC\")]),t._v(\" \"),a(\"p\",[t._v(\"代码如下：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n * vm参数：-Xms50m -Xmx50m -Xmn20m -XX:+PrintGC\\n */\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Allocation\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"private\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"final\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),t._v(\" _1MB \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"private\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"testAllocation\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" one \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"6\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"_1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" two \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"6\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"_1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" three \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"6\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"_1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"testAllocation\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"日志输出如下：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Allocation\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"15360\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"13162K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"48640\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0092840\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"哎，就这么简短，日志的含义就是触发了一次minor gc，在GC前，堆空间的使用量是15360K(约16M)，GC后的堆空间使用量为13162K(约12M)，整个堆的空间是48640K。最后是本次GC花费的时间 0.0092840 secs 。\")]),t._v(\" \"),a(\"p\",[t._v(\"PrintGC打印的日志就是这么简短，只能看到总的信息，再具体的就看不到了。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_2-详细的参数-xx-printgcdetails\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-详细的参数-xx-printgcdetails\"}},[t._v(\"#\")]),t._v(\" 2. 详细的参数：-XX:+PrintGCDetails\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"配置：-Xms50m -Xmx50m -Xmn20m  \"),a(\"strong\",[t._v(\"-XX:+PrintGCDetails\")])])]),t._v(\" \"),a(\"p\",[t._v(\"日志输入如下（代码参考上面）：\")]),t._v(\" \"),a(\"img\",{attrs:{src:\"https://cdn.jsdelivr.net/gh/AJiSun/CDN/jvm-img/jvm-7-PrintGCDetails.png\"}}),t._v(\" \"),a(\"p\",[t._v(\"我们来逐句解释下上面日志的含义\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[t._v(\"[GC (Allocation Failure) [PSYoungGen: 15105K->946K(17920K)] 15105K->13242K(48640K), 0.0118657 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"GC (Allocation Failure)表示发生的minor GC，新生代回收前使用量15105K，回收后使用量946K(总共17920K)，整个堆占用从15105K下降到13242K(整堆的大小是48640K)\")]),t._v(\"。\"),a(\"strong\",[t._v(\"最后是GC花费的时间，user表示用户态CPU耗时，sys表示系统CPU耗时，real表示GC的实际经历的时间\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"PSYoungGen      total 17920K, used 7397K\")])])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"年轻代 总空间17920K，已使用了7397K (年轻代=eden+from/to)\")])]),t._v(\" \"),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[a(\"p\",[t._v(\"eden space 15360K, 42% used\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"eden区空间15360K，已使用了42%\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"from space 2560K, 36% used\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"from区空间2560K，已使用了36%\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"to   space 2560K, 0% used\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"to区空间2560K，已使用0%\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"ParOldGen       total 30720K, used 12296K / object space 30720K, 40% used\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"老年代总空间30720K。已使用了12296K，百分比是40%\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"Metaspace       used 3348K\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"元空间的使用，是不占用堆内存的\")])])])]),t._v(\" \"),a(\"p\",[t._v(\"上面的是GC详细日志的参数输出内容，还有个更详细的参数，回收前回收后都打印出来，上面的日志如果看不出回收信息 还可以通过对比了解。\")]),t._v(\" \"),a(\"p\",[t._v(\"补充：当老年代内存不足的时候还会发生full GC，日志如下\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.211\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Full\")]),t._v(\" GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Ergonomics\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"PSYoungGen\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"914\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"0K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"17920\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ParOldGen\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"26632\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"27351K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"30720\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"27546\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"27351K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"48640\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Metaspace\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3350\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"3350K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1056768\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0084485\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Times\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.02\")]),t._v(\" sys\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" real\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.01\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \\n\")])])]),a(\"h3\",{attrs:{id:\"_3-回收前后详细参数-xx-printheapatgc\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-回收前后详细参数-xx-printheapatgc\"}},[t._v(\"#\")]),t._v(\" 3. 回收前后详细参数：-XX:+PrintHeapAtGC\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"-Xms50m -Xmx50m -Xmn20m  \"),a(\"strong\",[t._v(\"-XX:+PrintHeapAtGC\")])])]),t._v(\" \"),a(\"p\",[t._v(\"日志输入如下（代码参考上面）：\")]),t._v(\" \"),a(\"img\",{attrs:{src:\"https://cdn.jsdelivr.net/gh/AJiSun/CDN/jvm-img/jvm-7-PrintHeapAtGC.png\"}}),t._v(\" \"),a(\"p\",[t._v(\"大部分都和上面日志内容是一样的，具体含义参考上面的，不过这次是打印了两个日志，\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"Heap before GC invocations=1 (full 0)：GC发生之前的堆空间的信息\")]),t._v(\" \"),a(\"li\",[t._v(\"Heap after GC invocations=1 (full 0)：GC发生之后堆空间的信息\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_4-gc发生的时间参数-xx-printgctimestamps\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-gc发生的时间参数-xx-printgctimestamps\"}},[t._v(\"#\")]),t._v(\" 4. GC发生的时间参数：-XX:PrintGCTimeStamps\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"-Xms50m -Xmx50m -Xmn20m   -XX:+PrintGC  -XX:+PrintGCTimeStamps\")])]),t._v(\" \"),a(\"p\",[t._v(\"日志如下(代码参考上面)\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.199\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Allocation\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"9268\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"6970K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"48640\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0073891\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"上面中的【0.199】就是这次GC发生的时间 （这个时间是虚拟机启动后的偏移量）\")]),t._v(\" \"),a(\"h4\",{attrs:{id:\"_5-应用程序执行时间参数-xx-printgcapplicationconcurrenttime\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-应用程序执行时间参数-xx-printgcapplicationconcurrenttime\"}},[t._v(\"#\")]),t._v(\" 5. 应用程序执行时间参数：-XX:+PrintGCApplicationConcurrentTime\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"-Xms50m -Xmx50m -Xmn20m  -XX:+PrintGCTimeStamps -XX:+PrintGC  -XX:+PrintGCApplicationConcurrentTime\")])]),t._v(\" \"),a(\"p\",[t._v(\"日志如下(代码参考上面)\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.236\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Application\")]),t._v(\" time\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0088226\")]),t._v(\" seconds\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.236\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Allocation\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"9268\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"7018K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"48640\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0080782\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.251\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Application\")]),t._v(\" time\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0074303\")]),t._v(\" seconds\\n\")])])]),a(\"p\",[t._v(\"如上输出的是程序执行的时间\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_6-应用程序停顿时间参数-xx-printgcapplicationstoppedtime\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-应用程序停顿时间参数-xx-printgcapplicationstoppedtime\"}},[t._v(\"#\")]),t._v(\" 6. 应用程序停顿时间参数：-XX:+PrintGCApplicationStoppedTime\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"-Xms50m -Xmx50m -Xmn20m  -XX:+PrintGCTimeStamps -XX:+PrintGC -XX:+PrintGCApplicationStoppedTime\")])]),t._v(\" \"),a(\"p\",[t._v(\"日志如下(代码参考上面)\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.181\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Allocation\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"15360\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"13210K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"48640\")]),t._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0107874\")]),t._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.192\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Total\")]),t._v(\" time \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" which application threads were stopped\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0109662\")]),t._v(\" seconds\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Stopping\")]),t._v(\" threads took\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0.0000396\")]),t._v(\" seconds\\n\")])])]),a(\"p\",[t._v(\"如上输出的是程序暂停的时间\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_7-日志落盘参数-xloggc\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7-日志落盘参数-xloggc\"}},[t._v(\"#\")]),t._v(\" 7. 日志落盘参数：-Xloggc\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"-Xms50m -Xmx50m -Xmn20m  -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:/Users/ajisun/Desktop/logs/gc.log\")])]),t._v(\" \"),a(\"p\",[t._v(\"默认情况下gc的日志会输出在控制台，但是不方便我们保存和分析定位问题，所以虚拟机还提供了日志输出文件的方式 ，用参数 -Xloggc来指定， 启动程序之后日志输出在对应目录下的gc.log文件中\")]),t._v(\" \"),a(\"img\",{attrs:{src:\"https://cdn.jsdelivr.net/gh/AJiSun/CDN/jvm-img/jvm-7-loggc.png\"}}),t._v(\" \"),a(\"h3\",{attrs:{id:\"_8-总结\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_8-总结\"}},[t._v(\"#\")]),t._v(\" 8. 总结\")]),t._v(\" \"),a(\"p\",[t._v(\"文中总共介绍了7种GC日志相关的参数，我们可以根据这几种参数调整日志的输出。根据日志的内存观察系统的情况以及排查问题。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"最简单参数-XX:+PrintGC\")]),t._v(\" \"),a(\"li\",[t._v(\"详细的参数：-XX:+PrintGCDetails\")]),t._v(\" \"),a(\"li\",[t._v(\"回收前后详细参数：-XX:+PrintHeapAtGC\")]),t._v(\" \"),a(\"li\",[t._v(\"GC发生的时间参数：-XX:PrintGCTimeStamps\")]),t._v(\" \"),a(\"li\",[t._v(\"应用程序执行时间参数：-XX:+PrintGCApplicationConcurrentTime\")]),t._v(\" \"),a(\"li\",[t._v(\"应用程序停顿时间参数：-XX:+PrintGCApplicationStoppedTime\")]),t._v(\" \"),a(\"li\",[t._v(\"日志落盘参数：-Xloggc\")])])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}